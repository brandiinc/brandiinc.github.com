I"d–<h2 id="overview">Overview</h2>

<p>ë¸Œëœë”” ê´€ë¦¬ì í”„ë¡œì íŠ¸ëŠ” Codeigniter + PHPë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>

<p>í˜„ì¬ì˜ ë¸Œëœë”” ê´€ë¦¬ì ì„œë¹„ìŠ¤ëŠ” ì´ˆê¸°ì˜ ì„œë¹„ìŠ¤ ëª¨ë¸ì´ê¸° ë•Œë¬¸ì— ê³„ì† ë” ë‚˜ì€ ë°©í–¥ìœ¼ë¡œ ë°œì „í•˜ê³  ìˆëŠ” ë¸Œëœë”” ë©ìŠ¤ì˜ ê°œë°œ ë°©í–¥ì„±ê³¼ ì˜ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ë¸Œëœë”” ê´€ë¦¬ìëŠ” ìƒˆë¡œìš´ í”„ë ˆì„ì›Œí¬ì™€ AWS Lamdaë¡œ êµ¬ì„±ë  ì¤€ë¹„ë¥¼ í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>

<p>í•˜ì§€ë§Œ ë¸Œëœë”” ê´€ë¦¬ìëŠ” ìƒë‹¹íˆ ë³µì¡í•˜ê³  ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆëŠ” ëª¸ì§‘ì´ í° ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— í•˜ë£¨ì•„ì¹¨ì— ì‹ ê·œ ê´€ë¦¬ìë¡œ ì´ê´€í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥ì— ê°€ê¹Œìš¸ ì •ë„ë¡œ ì–´ë µìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ê¸°ì¡´ ì„œë¹„ìŠ¤ì˜ ì•ˆì •ì„±ì„ í™•ë³´í•˜ê¸° ìœ„í•˜ì—¬ PHP Codeigniterì™€ ì˜ ë§ëŠ” TDD ë„êµ¬ë“¤ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.</p>

<p>í˜„ì¬ ê´€ë¦¬ì í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ TDD ë„êµ¬ë“¤ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

<ol>
  <li>PHPUnit</li>
  <li>SimpleTest</li>
  <li>TOAST</li>
</ol>

<p>ìœ„ì˜ ë„êµ¬ë“¤ ì¤‘ PHPUnitê³¼ SimpleTestëŠ” native PHP ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë„êµ¬ì´ë‹¤ ë³´ë‹ˆ, Codeigniter í™˜ê²½ì—ì„œ CI ì»¨íŠ¸ë¡¤ëŸ¬ ê°ì²´ë¥¼ ì´ìš©í•˜ì—¬ ì‹¤ í™˜ê²½ê³¼ ë¹„ìŠ·í•˜ê²Œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì´ ìƒë‹¹íˆ ê¹Œë‹¤ë¡­ìŠµë‹ˆë‹¤. ê¸°ë³¸ì ì¸ ì‹¤í–‰ ë°©ë²•ë¶€í„° í„°ë¯¸ë„ì„ ì‚¬ìš©í•œ ëª…ë ¹ì–´ë¡œ ì‹¤í–‰í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ í° ê±¸ë¦¼ëŒì´ ë˜ê¸°ë„ í•©ë‹ˆë‹¤.</p>

<p>ë¸Œëœë”” ê´€ë¦¬ì ì„œë¹„ìŠ¤ëŠ” ì‚¬ìš©ëŸ‰ì— ë”°ë¥¸ ê°€ë³€í˜• EC2 í™˜ê²½ì—ì„œ êµ¬ë™ë˜ê³  ìˆëŠ”ë°, ìƒìš© EC2 ì ‘ê·¼ì€ ê¸ˆì§€ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì›¹ì„ í†µí•œ TDD ë„êµ¬ê°€ í•„ìš”í–ˆìŠµë‹ˆë‹¤.</p>

<p>ê·¸ì— ë°˜í•´ TOASTëŠ” CI_Controllerë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì œì‘ëœ TDD ë„êµ¬ì…ë‹ˆë‹¤.</p>

<p>TOASTëŠ” Codeigniterì˜ ë‚´ì¥ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ unit_test ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•˜ì—¬ ì œì‘ë˜ì–´ì„œ CIì— ì™„ì „íˆ í†µí•©ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì›¹ì„ ì´ìš©í•œ í…ŒìŠ¤íŠ¸ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì§€ì› ë˜ê³ , ìƒë‹¹íˆ ê°€ë²¼ìš°ë©´ì„œ CIì˜ ê¸°ëŠ¥ë“¤ì„ ì €í•´í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
<br /><br /></p>

<h3 id="toast-assert-í•¨ìˆ˜-ëª©ë¡">TOAST assert í•¨ìˆ˜ ëª©ë¡</h3>

<ul>
  <li>_assert_true($assertion) : if($assertion)ì¼ ë•Œ ì„±ê³µ</li>
  <li>_assert_false($assertion) : if($assertion)ê°€ ì•„ë‹ë•Œ ì„±ê³µ</li>
  <li>_assert_false_strict($assertion) : $assertion === TRUEì¼ ë•Œ ì„±ê³µ</li>
  <li>_assert_false_strict($assertion) : $assertion === TRUEê°€ ì•„ë‹ ë•Œ ì„±ê³µ</li>
  <li>_assert_equals($base, $check) : $base == $checkì¼ ë•Œ ì„±ê³µ</li>
  <li>_assert_not_equals($base, $check) : $base == $checkê°€ ì•„ë‹ ë•Œ ì„±ê³µ</li>
  <li>_assert_equals_strict($base, $check) : $base === $checkì¼ ë•Œ ì„±ê³µ</li>
  <li>_assert_not_equals_strict($base, $check) : $base === $checkê°€ ì•„ë‹ ë•Œ ì„±ê³µ</li>
  <li>_assert_empty($assertion) : if(empty(assertion))ì¼ ë•Œ ì„±ê³µ</li>
  <li>_assert_not_empty($assertion) : if(empty(assertion))ê°€ ì•„ë‹ ë•Œ ì„±ê³µ</li>
</ul>

<p>ìœ„ì²˜ëŸ¼ boolean, equalí˜•ì€ ì—„ê²©í•œ(strict) ë¹„êµê¹Œì§€ 8ì¢…ì˜ assert í•¨ìˆ˜ì™€ ë¹„ì–´ ìˆìŒ ì—¬ë¶€ë¥¼ ê²€ì‚¬í•˜ëŠ” assert í•¨ìˆ˜ 2ì¢…ì„ ì œê³µí•©ë‹ˆë‹¤.</p>

<p>TOASTë„ ê²°êµ­ Codeigniter Controllerì˜ êµ¬í˜„ì²´ì´ê¸° ë•Œë¬¸ì— ì¼ë°˜ì ì¸ codeigniter Controller ì ‘ê·¼ ë°©ë²•ì„ í†µí•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë° ê°œë³„ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ë¥¼ ì§€ì›í•˜ê³ , toast_allì„ í†µí•´ ì „ì²´ í…ŒìŠ¤íŠ¸ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.</p>

<p>ìœ„ì²˜ëŸ¼ TOASTëŠ” Codeigniterì˜ TDD ë„êµ¬ë¡œ ì•ˆì„±ë§ì¶¤ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤ë§Œ, Codeigniter 1.x ë²„ì „ì—ì„œ ê°œë°œì´ ì¤‘ì§€ë˜ì–´ ìš´ì˜ì¤‘ì¸ ë²„ì „ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì•½ê°„ì˜ ìˆ˜ì •ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤.
<br /><br /></p>

<h2 id="1-í…ŒìŠ¤íŠ¸ë¥¼-ìœ„í•œ-í™˜ê²½-ì„¸íŒ…">1. í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ í™˜ê²½ ì„¸íŒ…</h2>

<ol>
  <li>
    <p>xampp ì„¤ì¹˜</p>

    <p><a href="https://www.apachefriends.org/index.html">https://www.apachefriends.org/index.html</a></p>
  </li>
  <li>
    <p>ci ì„¤ì¹˜</p>

    <p><a href="https://codeigniter.com/download">https://codeigniter.com/download</a></p>
  </li>
  <li>
    <p>vhost(ê°€ìƒ í˜¸ìŠ¤íŠ¸) ì„¤ì • - ë³„ë„ì˜ urlì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ìƒëµí•˜ì…”ë„ ë©ë‹ˆë‹¤</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> // ìœ„ì¹˜ : xampp/apache/conf/extra/httpd-vhosts.con
 &lt;VirtualHost *:80&gt;
     ServerName tdd.localhost
     DocumentRoot "c:/workplace/CI_Toast_TDD"
     &lt;Directory "c:/workplace/CI_Toast_TDD"&gt;
         Options Indexes FollowSymLinks Includes execCGI
         AllowOverride all
         Require all granted
     &lt;/Directory&gt;
 &lt;/VirtualHost&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>httpd ì„¤ì •</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> // ìœ„ì¹˜ : xampp/apache/conf/httpd.conf
 1. AllowOverride All
   &lt;Directory&gt; íƒœê·¸ì˜ AllowOverride ê°’ì„ Allë¡œ ì„¸íŒ… í•´ì¤ë‹ˆë‹¤.

 2. LoadModule rewrite_module modules/mod_rewrite.so
   ìœ„ì˜ ëª¨ë“ˆì´ ì£¼ì„ì²˜ë¦¬ ë˜ì–´ ìˆë‹¤ë©´ í•´ì œ í•´ì¤ë‹ˆë‹¤.
</code></pre></div>    </div>
  </li>
  <li>
    <p>.htaccess ì„¤ì • index.php ë‚ ë¦¬ê¸°</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> // ì£¼ì†Œ ëì— index.phpë¥¼ ì…ë ¥í•˜ì§€ ì•Šê¸° ìœ„í•˜ì—¬
 //.htaccess íŒŒì¼ì„ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ì‘ì„±í•´ ì¤ë‹ˆë‹¤.
 &lt;IfModule mod_rewrite.c&gt;
   RewriteEngine On
   RewriteBase /
   RewriteCond $1 !^(index\.php|images|captcha|data|include|uploads|robots\.txt)
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule ^(.*)$ /index.php/$1 [L]
 &lt;/IfModule&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>Toast ë‹¤ìš´ë¡œë“œ</p>

    <p><a href="http://jensroland.com/projects/toast/">http://jensroland.com/projects/toast/</a></p>
  </li>
  <li>
    <p>CI ë‚´ë¶€ì— í…ŒìŠ¤íŠ¸ íŒŒì¼ ë°°ì¹˜</p>
    <ul>
      <li>ë‹¤ìŒ ìœ„ì¹˜ì— Toast íŒŒì¼ì„ ì¶”ê°€í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">application/controllers/test</code></li>
      <li>ê¸°ë³¸ì ì¸ íŒŒì¼ êµ¬ì„±ì€ <code class="language-plaintext highlighter-rouge">Toast.php</code>, <code class="language-plaintext highlighter-rouge">Toast_all.php</code>, <code class="language-plaintext highlighter-rouge">example_tests.php</code>ì…ë‹ˆë‹¤.</li>
    </ul>
  </li>
</ol>

<p>1. í…ŒìŠ¤íŠ¸ ë„ë©”ì¸ ì ‘ì†</p>

<p><a href="http://ci.localhost/test/example_tests" style="margin-left: 35px;">http://tdd.localhost/test/example_tests</a></p>

<figure class="percent100">
  <img src="http://labs.brandi.co.kr///assets/2020/20200623/01.png" alt="toast" />
</figure>
<figcaption>â‡’ ì—ëŸ¬ ë°œìƒ Ci 1.x ë²„ì „ìš© Toastì´ê¸° ë•Œë¬¸ì— ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ê¸° ìœ„í•´ì„œëŠ” ì•½ê°„ì˜ ìˆ˜ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.</figcaption>

<p><br /><br /></p>

<h2 id="2-codeigniter1ì—ì„œ-ë‹¬ë¼ì§„-ë¶€ë¶„ì—-ëŒ€í•˜ì—¬-ì†ŒìŠ¤-ìˆ˜ì •">2. Codeigniter1ì—ì„œ ë‹¬ë¼ì§„ ë¶€ë¶„ì— ëŒ€í•˜ì—¬ ì†ŒìŠ¤ ìˆ˜ì •</h2>

<ol>
  <li>example_tests.php ìˆ˜ì •</li>
</ol>

<ul>
  <li>TOASTì— ê¸°ë³¸ì ìœ¼ë¡œ í¬í•¨ëœ í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±ì ë¶€ë¶„ì„ ìˆ˜ì •í•´ ì¤ë‹ˆë‹¤.</li>
</ul>

<p><strong>[AS-IS]</strong></p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">Example_tests</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="k">parent</span><span class="o">::</span><span class="nf">Toast</span><span class="p">(</span><span class="k">__FILE__</span><span class="p">);</span>
    <span class="c1">// Load any models, libraries etc. you need here</span>
  <span class="p">}</span>
</code></pre></div></div>

<p><strong>[TO-BE]</strong></p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">__construct</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="k">parent</span><span class="o">::</span><span class="nf">__construct</span><span class="p">(</span><span class="k">__FILE__</span><span class="p">);</span> <span class="c1">// &lt;- ì—¬ê¸°ê°€ ìˆ˜ì •ë¨</span>
    <span class="c1">// Load any models, libraries etc. you need here</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>2. Toast.php ìˆ˜ì •</p>

<ul>
  <li>ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë©”ì¸ í´ë˜ìŠ¤ì¸ Toast.phpë¥¼ ìˆ˜ì •í•´ ì¤ë‹ˆë‹¤.</li>
  <li>ìƒì†ë°›ì€ í´ë˜ìŠ¤ë¥¼ Controller â†’ CI_Controllerë¡œ ë³€ê²½í•´ ì¤ë‹ˆë‹¤.</li>
  <li>ìƒì„±ì ë¶€ë¶„ì„ ìˆ˜ì •í•´ ì¤ë‹ˆë‹¤.</li>
</ul>

<p><strong>[AS-IS]</strong></p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">abstract</span> <span class="kd">class</span> <span class="nc">Toast</span> <span class="kd">extends</span> <span class="nc">Controller</span>
<span class="p">{</span>
  <span class="c1">// The folder INSIDE /controllers/ where the test classes are located</span>
  <span class="c1">// TODO: autoset</span>
  <span class="k">var</span> <span class="nv">$test_dir</span> <span class="o">=</span> <span class="s1">'/test/'</span><span class="p">;</span>

  <span class="k">var</span> <span class="nv">$modelname</span><span class="p">;</span>
  <span class="k">var</span> <span class="nv">$modelname_short</span><span class="p">;</span>
  <span class="k">var</span> <span class="nv">$message</span><span class="p">;</span>
  <span class="k">var</span> <span class="nv">$messages</span><span class="p">;</span>
  <span class="k">var</span> <span class="nv">$asserts</span><span class="p">;</span>

  <span class="k">function</span> <span class="n">Toast</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">parent</span><span class="o">::</span><span class="nf">Controller</span><span class="p">();</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">load</span><span class="o">-&gt;</span><span class="nf">library</span><span class="p">(</span><span class="s1">'unit_test'</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">modelname</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">modelname_short</span> <span class="o">=</span> <span class="nb">basename</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="s1">'.php'</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
  <span class="p">}</span>

<span class="mf">...</span> <span class="n">ìƒëµ</span>

</code></pre></div></div>

<p>[TO-BE]</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">abstract</span> <span class="kd">class</span> <span class="nc">Toast</span> <span class="kd">extends</span> <span class="nc">CI_Controller</span> <span class="c1">// &lt;- ì—¬ê¸°ê°€ ìˆ˜ì •ë¨</span>
<span class="p">{</span>
  <span class="c1">// The folder INSIDE /controllers/ where the test classes are located</span>
  <span class="c1">// TODO: autoset</span>
  <span class="k">var</span> <span class="nv">$test_dir</span> <span class="o">=</span> <span class="s1">'/test/'</span><span class="p">;</span>

  <span class="k">var</span> <span class="nv">$modelname</span><span class="p">;</span>
  <span class="k">var</span> <span class="nv">$modelname_short</span><span class="p">;</span>
  <span class="k">var</span> <span class="nv">$message</span><span class="p">;</span>
  <span class="k">var</span> <span class="nv">$messages</span><span class="p">;</span>
  <span class="k">var</span> <span class="nv">$asserts</span><span class="p">;</span>

  <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="c1">// &lt;- ì—¬ê¸°ê°€ ìˆ˜ì •ë¨</span>
  <span class="p">{</span>
    <span class="k">parent</span><span class="o">::</span><span class="nf">__construct</span><span class="p">();</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">load</span><span class="o">-&gt;</span><span class="nf">library</span><span class="p">(</span><span class="s1">'unit_test'</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">modelname</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">modelname_short</span> <span class="o">=</span> <span class="nb">basename</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="s1">'.php'</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
  <span class="p">}</span>

<span class="mf">...</span> <span class="n">ìƒëµ</span>

</code></pre></div></div>

<p>3. Toast_all.php ìˆ˜ì •</p>

<ul>
  <li>ì „ì œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ Toast_all.php í´ë˜ìŠ¤ë¥¼ ìˆ˜ì •í•´ ì¤ë‹ˆë‹¤.</li>
  <li>ìƒì†ë°›ì€ í´ë˜ìŠ¤ë¥¼ Controller â†’ CI_Controllerë¡œ ë³€ê²½í•´ ì¤ë‹ˆë‹¤.</li>
  <li>ìƒì„±ì ë¶€ë¶„ì„ ìˆ˜ì •í•´ ì¤ë‹ˆë‹¤.</li>
</ul>

<p>[AS-IS]</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Toast_all</span> <span class="kd">extends</span> <span class="nc">Controller</span>
<span class="p">{</span>
  <span class="c1">// The folder INSIDE /controllers/ where the test classes are located</span>
  <span class="c1">// TODO: autoset</span>
  <span class="k">var</span> <span class="nv">$test_dir</span> <span class="o">=</span> <span class="s1">'/test/'</span><span class="p">;</span>

  <span class="c1">// Files to skip (ie. non-test classes) inside the test dir</span>
  <span class="k">var</span> <span class="nv">$skip</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Toast.php'</span><span class="p">,</span>
    <span class="s1">'Toast_all.php'</span>
  <span class="p">);</span>

  <span class="c1">// CURL multithreaded mode (only set to true if you are sure your tests</span>
  <span class="c1">// don't conflict when run in parallel)</span>
  <span class="k">var</span> <span class="nv">$multithreaded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

  <span class="k">function</span> <span class="n">Toast_all</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="k">parent</span><span class="o">::</span><span class="nf">Controller</span><span class="p">();</span>
  <span class="p">}</span>

<span class="mf">...</span> <span class="n">ìƒëµ</span>
</code></pre></div></div>

<p>[TO-BE]</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Toast_all</span> <span class="kd">extends</span> <span class="nc">CI_Controller</span> <span class="c1">// &lt;- ì—¬ê¸°ê°€ ìˆ˜ì •ë¨</span>
<span class="p">{</span>
  <span class="c1">// The folder INSIDE /controllers/ where the test classes are located</span>
  <span class="c1">// TODO: autoset</span>
  <span class="k">var</span> <span class="nv">$test_dir</span> <span class="o">=</span> <span class="s1">'/test/'</span><span class="p">;</span>

  <span class="c1">// Files to skip (ie. non-test classes) inside the test dir</span>
  <span class="k">var</span> <span class="nv">$skip</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Toast.php'</span><span class="p">,</span>
    <span class="s1">'Toast_all.php'</span>
  <span class="p">);</span>

  <span class="c1">// CURL multithreaded mode (only set to true if you are sure your tests</span>
  <span class="c1">// don't conflict when run in parallel)</span>
  <span class="k">var</span> <span class="nv">$multithreaded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

  <span class="k">function</span> <span class="n">__construct</span><span class="p">()</span> <span class="c1">// &lt;- ì—¬ê¸°ê°€ ìˆ˜ì •ë¨</span>
  <span class="p">{</span>
    <span class="k">parent</span><span class="o">::</span><span class="nf">__construct</span><span class="p">();</span>
  <span class="p">}</span>

<span class="mf">...</span> <span class="n">ìƒëµ</span>
</code></pre></div></div>

<p>4. Codeigniter ë²„ì „ì— ë§ê²Œ ìˆ˜ì •í•œ TOAST í…ŒìŠ¤íŠ¸</p>

<p>4-1. í´ë˜ìŠ¤ ì§€ì • ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ : <a href="http://tdd.localhost/test/example_tests"><code class="language-plaintext highlighter-rouge">http://tdd.localhost/test/example_tests</code></a></p>

<figure class="percent100">
  <img src="http://labs.brandi.co.kr///assets/2020/20200623/02.png" alt="toast" />
</figure>
<figcaption></figcaption>

<p>4-2. í•¨ìˆ˜ ë‹¨ìœ„ì˜ ë‹¨ì¼ í…ŒìŠ¤íŠ¸ : <a href="http://tdd.localhost/test/example_tests/that_fails"><code class="language-plaintext highlighter-rouge">http://tdd.localhost/test/example_tests/that_fails</code></a></p>

<figure class="percent100">
  <img src="http://labs.brandi.co.kr///assets/2020/20200623/03.png" alt="toast" />
</figure>
<figcaption></figcaption>

<p>4-3. í…ŒìŠ¤íŠ¸ í´ë” ë‚´ì˜ ëª¨ë“  í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ì „ì²´ í…ŒìŠ¤íŠ¸: <a href="http://tdd.localhost/test/toast_all"><code class="language-plaintext highlighter-rouge">http://tdd.localhost/test/toast_all</code></a></p>

<figure class="percent100">
  <img src="http://labs.brandi.co.kr///assets/2020/20200623/04.png" alt="toast" />
</figure>
<figcaption></figcaption>

<h3 id="ì£¼ì˜ì‚¬í•­">ì£¼ì˜ì‚¬í•­</h3>

<ul>
  <li>ë¡œì»¬ í…ŒìŠ¤íŠ¸ ì‹œ virtual hostë¥¼ ì‚¬ìš©í•œë‹¤ë©´ <strong>hosts</strong>ì— <strong>ê°€ì¥ í˜¸ìŠ¤íŠ¸ ê²½ë¡œ</strong>ë¥¼ ë“±ë¡í•´ ì£¼ì–´ì•¼ toast_allì—ì„œ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (DNSê°€ ë“±ë¡ë˜ì§€ ì•Šì•„ Could not resolve host ì—ëŸ¬ê°€ ë°œìƒí•¨)</li>
  <li>toast_allì˜ base url ì€ config.php ì˜ $config[â€˜base_urlâ€™] ì£¼ì†Œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
<br /><br /></li>
</ul>

<h2 id="3-codeigniter-custom-loader-í´ë˜ìŠ¤ë¥¼-êµ¬í˜„í•˜ì—¬-database-mock-ì‚¬ìš©í•˜ê¸°">3. Codeigniter Custom Loader í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ Database Mock ì‚¬ìš©í•˜ê¸°</h2>

<p>ì•„ì‰½ê²Œë„ TOASTì—ì„œëŠ” ìì²´ mock í´ë˜ìŠ¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

<p>ë‹¨ìœ„í…ŒìŠ¤íŠ¸ ì—ì„œ ìì£¼ ì‚¬ìš©ë˜ëŠ” mock ë°ì´í„°ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•˜ì—¬ CI Loader í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ MY_Loader.phpë¥¼ êµ¬í˜„í•˜ì—¬ $thisâ†’loadâ†’model() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•Œ mock ë””ë ‰í„°ë¦¬ í•˜ìœ„ì˜ mock í´ë˜ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>

<p>(MY_Loader.php ì—ì„œ â€˜MY_â€™ prefixëŠ” config.php $config[â€˜subclass_prefixâ€™] = â€˜MY_â€™; ì—ì„œ ìˆ˜ì • í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">system/core/Loader.php</code>ë¥¼ ë³µì‚¬í•˜ì—¬ <code class="language-plaintext highlighter-rouge">application/core/</code> í•˜ìœ„ì— ë¶™ì—¬ ë„£ìŠµë‹ˆë‹¤.</li>
  <li>ì†ŒìŠ¤ì—ì„œ í•„ìš”í•œ ë¶€ë¶„ë§Œ ë‚¨ê¸°ê³  ëª¨ë‘ ì œê±°í•˜ê³ , ì†ŒìŠ¤ë¥¼ ì•Œë§ê²Œ ìˆ˜ì •í•´ ì¤ë‹ˆë‹¤.
    <ul>
      <li>í•„ìš”í•œ í•¨ìˆ˜ì¸ modelì„ ì œì™¸í•˜ê³  ëª¨ë‘ ì‚­ì œí•©ë‹ˆë‹¤.</li>
      <li>ìƒì† êµ¬ë¬¸ extend CI_Loaderë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</li>
      <li>ìƒì„±ìë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</li>
      <li>ë‚¨ê²¨ë‘” model í•¨ìˆ˜ì˜ ë§ˆì§€ë§‰ ì¸ìë¡œ $is_mock ì¸ìë¥¼ ë°›ìŠµë‹ˆë‹¤.</li>
    </ul>
  </li>
</ol>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kd">class</span> <span class="nc">MY_Loader</span> <span class="kd">extends</span> <span class="nc">CI_Loader</span> <span class="c1">// ì›ë³¸ CI_Loader ìƒì†</span>
<span class="p">{</span>
    <span class="c1">// ìƒì„±ìì—ì„œ ë¶€ëª¨(CI_Loader) ìƒì„±ì ì‹¤í–‰</span>
    <span class="k">function</span> <span class="n">__construct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">parent</span><span class="o">::</span><span class="nf">__construct</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cd">/**
     * CI_Loaderì˜ model í•¨ìˆ˜ë¥¼ ê·¸ëŒ€ë¡œ ë³µì‚¬í•œ í›„
     * ëª©ì—… ë°ì´í„°ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•œ êµ¬ë¶„ ë³€ìˆ˜ë§Œ ì¶”ê°€
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">model</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$name</span> <span class="o">=</span> <span class="s1">''</span><span class="p">,</span> <span class="nv">$db_conn</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="nv">$is_mock</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* ... ì†ŒìŠ¤ ìƒëµ */</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="n">_ci_model_paths</span> <span class="k">as</span> <span class="nv">$mod_path</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// ë¡œë“œí•  íŒŒì¼ ê²½ë¡œ ì§€ì • ë¶€ë¶„ì„ ë¶„ê¸° ì²˜ë¦¬í•´ ì¤ë‹ˆë‹¤.</span>
            <span class="nv">$filename</span> <span class="o">=</span> <span class="nv">$mod_path</span><span class="mf">.</span><span class="p">(</span><span class="nv">$is_mock</span> <span class="o">?</span> <span class="s1">'mock/'</span> <span class="o">:</span> <span class="s1">'models/'</span><span class="p">)</span><span class="mf">.</span><span class="nv">$path</span><span class="mf">.</span><span class="nv">$model</span><span class="mf">.</span><span class="s1">'.php'</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">file_exists</span><span class="p">(</span><span class="nv">$filename</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nv">$db_conn</span> <span class="o">!==</span> <span class="kc">FALSE</span> <span class="k">AND</span> <span class="o">!</span> <span class="nb">class_exists</span><span class="p">(</span><span class="s1">'CI_DB'</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$db_conn</span> <span class="o">===</span> <span class="kc">TRUE</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="nv">$db_conn</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="nv">$CI</span><span class="o">-&gt;</span><span class="n">load</span><span class="o">-&gt;</span><span class="nf">database</span><span class="p">(</span><span class="nv">$db_conn</span><span class="p">,</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="kc">TRUE</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">class_exists</span><span class="p">(</span><span class="s1">'CI_Model'</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="nf">load_class</span><span class="p">(</span><span class="s1">'Model'</span><span class="p">,</span> <span class="s1">'core'</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">require_once</span><span class="p">(</span><span class="nv">$filename</span><span class="p">);</span>

            <span class="nv">$model</span> <span class="o">=</span> <span class="nb">ucfirst</span><span class="p">(</span><span class="nv">$model</span><span class="p">);</span>

            <span class="nv">$CI</span><span class="o">-&gt;</span><span class="nv">$name</span> <span class="o">=</span> <span class="k">new</span> <span class="nv">$model</span><span class="p">();</span>

            <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">_ci_models</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// couldn't find the model</span>
        <span class="nf">show_error</span><span class="p">(</span><span class="s1">'Unable to locate the model you have specified: '</span><span class="mf">.</span><span class="nv">$model</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>3. ì»¤ìŠ¤í…€ Loaderë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ DB ë°ì´í„°ì™€  mock ë°ì´í„° ë¡œë“œ</p>

<ul>
  <li>ìƒí’ˆ ëª©ë¡ ì¡°íšŒ ëª¨ë¸ ê°ì²´ ì œì‘</li>
</ul>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//ìœ„ì¹˜ : application/model/product_m.php

<span class="cp">&lt;?php</span>
<span class="kd">class</span> <span class="nc">Product_m</span> <span class="kd">extends</span> <span class="nc">CI_Model</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">parent</span><span class="o">::</span><span class="nf">__construct</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">select_product_list</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$sql</span> <span class="o">=</span> <span class="s1">'
            SELECT
                no
                , name
                , price
                , inventory
            FROM
                table_product
        '</span><span class="p">;</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">db</span><span class="o">-&gt;</span><span class="nf">query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">result</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>Mock ê°ì²´ ì œì‘</li>
</ul>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//ìœ„ì¹˜ : application/mock/product_m.php

<span class="cp">&lt;?php</span>
<span class="kd">class</span> <span class="nc">Product_m</span> <span class="c1">// Mock í´ë ˆìŠ¤ì´ê¸° ë•Œë¬¸ì— CI_Model ìƒì†ì´ í•„ìš” ì—†ë‹¤.</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">select_product_list</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$list</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

        <span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

            <span class="nv">$no</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
            <span class="nv">$product</span> <span class="o">=</span> <span class="k">new</span> <span class="err">\</span><span class="nf">stdClass</span><span class="p">();</span>

            <span class="nv">$product</span><span class="o">-&gt;</span><span class="n">no</span> <span class="o">=</span> <span class="nv">$no</span><span class="p">;</span>
            <span class="nv">$product</span><span class="o">-&gt;</span><span class="n">name</span> <span class="o">=</span> <span class="s1">'Mock í…ŒìŠ¤íŠ¸ ìƒí’ˆ '</span> <span class="mf">.</span> <span class="nv">$no</span><span class="p">;</span>
            <span class="nv">$product</span><span class="o">-&gt;</span><span class="n">price</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$no</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>
            <span class="nv">$product</span><span class="o">-&gt;</span><span class="n">inventory</span> <span class="o">=</span> <span class="mi">99</span><span class="p">;</span>
            <span class="nv">$list</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$product</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$list</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>DB ë°ì´í„° ì¡°íšŒ ì˜ˆì‹œ</li>
</ul>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// application/controllersì˜ Product.php</span>

<span class="c1">// ì¼ë°˜ì ì¸ ìƒí’ˆ ëª©ë¡ ì¡°íšŒ</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">product_list</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">load</span><span class="o">-&gt;</span><span class="nf">model</span><span class="p">(</span><span class="s1">'product_m'</span><span class="p">);</span> <span class="c1">// ì¼ë°˜ì ì¸ ëª¨ë¸ í˜¸ì¶œ</span>
        <span class="nv">$product_list</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">product_m</span><span class="o">-&gt;</span><span class="nf">select_product_list</span><span class="p">();</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">output</span><span class="o">-&gt;</span><span class="nf">set_content_type</span><span class="p">(</span><span class="s1">'text/json'</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">output</span><span class="o">-&gt;</span><span class="nf">set_output</span><span class="p">(</span><span class="nb">json_encode</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'product_list'</span><span class="o">=&gt;</span><span class="nv">$product_list</span><span class="p">)));</span>
  <span class="p">}</span>
</code></pre></div></div>

<figure class="percent50">
  <img src="http://labs.brandi.co.kr///assets/2020/20200623/05.png" alt="toast" />
</figure>
<figcaption>ì¼ë°˜ì ì¸ DB ì¡°íšŒ ê²°ê³¼ í™”ë©´</figcaption>

<p><br /><br /></p>

<ul>
  <li>MOCK ë°ì´í„°ë¥¼ ì´ìš©í•œ ë°ì´í„° ë¡œë“œ ì†ŒìŠ¤</li>
</ul>

<p>$thisâ†’loadâ†’model()ì˜ ë§ˆì§€ë§‰ ì¸ìì¸ $is_mockì„ trueë¡œ í˜¸ì¶œ í•©ë‹ˆë‹¤.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// application/controllersì˜ Product.php</span>

<span class="c1">// ì¼ë°˜ì ì¸ ìƒí’ˆ ëª©ë¡ ì¡°íšŒ</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">product_list</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">load</span><span class="o">-&gt;</span><span class="nf">model</span><span class="p">(</span><span class="s1">'product_m'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span> <span class="c1">// ë§ˆì§€ë§‰ ì¸ìì¸ $is_mockì„ trueë¡œ ì„¤ì •</span>
        <span class="nv">$product_list</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">product_m</span><span class="o">-&gt;</span><span class="nf">select_product_list</span><span class="p">();</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">output</span><span class="o">-&gt;</span><span class="nf">set_content_type</span><span class="p">(</span><span class="s1">'text/json'</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">output</span><span class="o">-&gt;</span><span class="nf">set_output</span><span class="p">(</span><span class="nb">json_encode</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'product_list'</span><span class="o">=&gt;</span><span class="nv">$product_list</span><span class="p">)));</span>
  <span class="p">}</span>
</code></pre></div></div>

<figure class="percent50">
  <img src="http://labs.brandi.co.kr///assets/2020/20200623/06.png" alt="toast" />
</figure>
<figcaption>DBë¥¼ ì¡°íšŒí•˜ì§€ ì•Šê³  Mock ë°ì´í„°ë¥¼ ì¶œë ¥í•œ ê²°ê³¼ í™”ë©´</figcaption>

<p><br /><br /></p>

<p>4. mock ë°ì´í„°ì™€ TOASTë¥¼ ì´ìš©í•œ í…ŒìŠ¤íŠ¸ ì§„í–‰</p>

<ul>
  <li>TOAST í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ì†ŒìŠ¤ ì‘ì„±</li>
</ul>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="no">APPPATH</span> <span class="mf">.</span> <span class="s1">'/controllers/test/Toast.php'</span><span class="p">);</span>

<span class="kd">class</span> <span class="nc">Product_tests</span> <span class="kd">extends</span> <span class="nc">Toast</span>
<span class="p">{</span>
   <span class="cm">/* ... ì†ŒìŠ¤ ìƒëµ */</span>
    <span class="k">function</span> <span class="n">test_product_list</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// Mock classë¥¼ ì´ìš©í•´ ë°ì´í„° ë¡œë“œ</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">load</span><span class="o">-&gt;</span><span class="nf">model</span><span class="p">(</span><span class="s1">'product_m'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nv">$product_list</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">product_m</span><span class="o">-&gt;</span><span class="nf">select_product_list</span><span class="p">();</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">message</span> <span class="o">=</span> <span class="s1">'í…ŒìŠ¤íŠ¸ìš© Mock ì •ë³´: '</span><span class="p">;</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$product_list</span> <span class="k">as</span> <span class="nv">$i</span><span class="o">=&gt;</span><span class="nv">$product</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">message</span> <span class="mf">.</span><span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$product</span><span class="p">,</span> <span class="no">JSON_UNESCAPED_UNICODE</span><span class="p">)</span><span class="mf">.</span><span class="kc">PHP_EOL</span><span class="p">;</span>

            <span class="c1">// _assert_equals() í•¨ìˆ˜ë¥¼ í†µí•´ ìƒí’ˆëª… ê²€ì¦</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">_assert_equals</span><span class="p">(</span><span class="nv">$product_list</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="s1">'Mock í…ŒìŠ¤íŠ¸ ìƒí’ˆ '</span><span class="mf">.</span><span class="p">(</span><span class="nv">$i</span><span class="o">+</span><span class="mi">1</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p><br /></p>

<ul>
  <li>ê²°ê³¼ í™”ë©´ - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸</li>
</ul>

<figure class="percent100">
  <img src="http://labs.brandi.co.kr///assets/2020/20200623/07.png" alt="toast" />
</figure>
<figcaption></figcaption>

<p>ì˜ë„ëŒ€ë¡œ mock ë°ì´í„°ë¥¼ í™œìš©í•œ ìƒí’ˆëª…ì˜ ê²€ì¦ì´ ì„±ê³µí•˜ì—¬ ê²°ê³¼ í™”ë©´ì´ í‘œì¶œë˜ì—ˆìŠµë‹ˆë‹¤.</p>

<p>ìœ„ í…ŒìŠ¤íŠ¸ê°€ ì „ì²´ í…ŒìŠ¤íŠ¸ì—ì„œë„ ì‘ë™í•˜ëŠ”ì§€ ì§„í–‰í•´ë´…ë‹ˆë‹¤.
<br /><br /></p>

<ul>
  <li>ê²°ê³¼ í™”ë©´ - ì „ì²´ í…ŒìŠ¤íŠ¸</li>
</ul>

<figure class="percent100">
  <img src="http://labs.brandi.co.kr///assets/2020/20200623/08.png" alt="toast" />
</figure>
<figcaption></figcaption>

<p>ìœ„ì²˜ëŸ¼ ì „ì²´ í…ŒìŠ¤íŠ¸ urlë¡œ ì ‘ì†í•´ë³´ë‹ˆ ì •ìƒì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ê°€ ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.
<br /><br /></p>

<h2 id="conclusion">Conclusion</h2>

<p>â€˜ì–´ì°¨í”¼ ê°œí¸í•  ê±°ë‹ˆê¹Œ..â€™ í•˜ë©°, ì¼ê±°ë¦¬ì— ì¹˜ì—¬ í•‘ê³„ë§Œ ë§Œë“¤ê³  ì°¨ì¼ í”¼ì¼ ë¯¸ë£¨ë‹¤ê°€ ë°€ë¦° ìˆ™ì œë¥¼ í•˜ëŠ” ëŠë‚Œì´ ë˜ì–´ë²„ë ¸ë„¤ìš”. â€˜PHP + Codeigniter TDDâ€™ë¼ëŠ” í‚¤ì›Œë“œê°€ ìƒê°ë³´ë‹¤ ìë£Œê°€ ì—†ì–´ì„œ  ëœ¬êµ¬ë¦„ ì¡ë“¯ì´ êµ¬ìƒë§Œ í•˜ë‹¤ê°€, ê´œì°®ì€ ë„êµ¬ë¥¼ ì°¾ì•„ë‚´ì–´ ë°©í–¥ì„±ì„ ì¡ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>

<p>ê·¸ë ‡ê²Œ TOASTë¥¼ ì„ íƒí•˜ì—¬  í•œì°¸ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ìˆì—ˆëŠ”ë° Mock ê¸°ëŠ¥ì´ ì—†ì–´ì„œ ìƒë‹¹íˆ ë‚œê°í–ˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ë„ ë‹¤í–‰íˆ Codeigniterê°€ í™•ì¥ì„±ì´ ì¢‹ì•„ì„œ Loder Classì˜ ê°„ë‹¨í•œ ìˆ˜ì •ì„ í†µí•´ mock ë°ì´í„°ë¥¼ ì´ìš©í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>

<p>Codeigniterë¥¼ ì‚¬ìš© ì¤‘ì¸ë° ë§ˆë•…í•œ TDD ë„êµ¬ê°€ ì—†ì–´ ê³ ë¯¼ì´ì‹  ë¶„ë“¤ì€ TOASTë¥¼ í•œë²ˆ ì‚¬ìš©í•´ë³´ì„¸ìš”!</p>

<p>ì•½ê°„ ìˆ˜ì •ì´ í•„ìš”í•˜ì§€ë§Œ ì‹¬í”Œí•´ì„œ ì‚¬ìš©í•˜ê¸° ì¢‹ìŠµë‹ˆë‹¤.</p>
:ET